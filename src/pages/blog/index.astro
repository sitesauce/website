---
import { format as timeago } from 'timeago.js';
import { getAllPostPreviews } from '@/lib/getContent';
import Layout from '@/components/Layout.astro';
import { Image } from 'astro:assets';

const posts = getAllPostPreviews();
---

<Layout
	title="Static Words - The Official Sitesauce Blog"
	description="News, tips, highlights, and other behind-the-scenes content from Sitesauce."
	image="https://brand-assets.sitesauce.app/blog-card.png"
>
	<div
		class="bg-brand-50 relative pt-24 pb-20 px-4 sm:px-6 lg:pb-0 lg:px-8 z-10"
	>
		<div class="relative max-w-7xl mx-auto">
			<div class="text-center">
				<span class="uppercase text-brand-900 font-brown"
					>The Official Sitesauce Blog</span
				>
				<h2
					class="mt-1 text-3xl leading-9 tracking-tight font-extrabold text-brand-900 sm:text-4xl sm:leading-10 font-spoof"
				>
					Static Words
				</h2>
				<p
					class="mt-3 max-w-2xl mx-auto text-xl leading-7 text-brand-700 sm:mt-4 font-ttnorms"
				>
					News, tips, highlights, and other behind-the-scenes content
					from Sitesauce.
				</p>
			</div>
			<div
				class="mt-12 grid sm:grid-cols-2 gap-5 max-w-2xl mx-auto lg:grid-cols-3 lg:max-w-none"
			>
				{
					posts.map((post) => (
						<a href={`/blog/${post.slug}`}>
							<div class="flex flex-col rounded-lg shadow-brand hover:shadow-brand-hover overflow-hidden transition duration-300 ease-in-out">
								<div class="flex-shrink-0">
									<img
										class="h-48 w-full object-cover"
										src={post.image}
										alt={post.title}
										loading="lazy"
									/>
								</div>
								<div class="border-b border-l border-r border-brand-300 flex-1 bg-white px-6 pt-3 pb-6 flex flex-col justify-between rounded-b-lg">
									<div class="flex-1">
										<div>
											<p class="font-ttnorms prose text-gray-500">
												{post.description}
											</p>
										</div>
									</div>
									<div class="mt-6 flex items-center">
										<div class="flex-shrink-0">
											<div>
												<Image
													class="h-10 w-10 rounded-full"
													width="40"
													height={'40'}
													src="https://miguelpiedrafita.com/images/_site/logo.png"
													alt="Miguel Piedrafita"
													loading="lazy"
												/>
											</div>
										</div>
										<div class="ml-3">
											<p class="text-sm leading-5 font-medium text-gray-900 font-spoof">
												Miguel Piedrafita
											</p>
											<div class="flex text-sm leading-5 text-gray-500 font-ttnorms">
												<time
													datetime={post.publishedAt}
												>
													{timeago(
														new Date(
															post.publishedAt,
														),
													)}
												</time>
												<span class="mx-1">
													&middot;
												</span>
												<span>
													{post.reading_time} min read
												</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</a>
					))
				}
			</div>
		</div>
	</div>
</Layout>
